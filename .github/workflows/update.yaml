name: Update counter

on:
  push:
    paths:
      - trigger.png

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Read and increment view count
        run: |
          count=$(jq '.views' hits.json)
          echo "ðŸ‘‰ åŽŸæœ¬çš„ countï¼š$count"
          new_count=$((count + 1))
          echo "{\"views\": $new_count}" > hits.json
          echo "$new_count" > count.txt

      - name: Commit and push
        run: |
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
          git add hits.json count.txt
          git commit -m "Update view count"
          git push